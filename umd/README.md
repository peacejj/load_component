### 方案一：放在全局对象上

#### 步骤

1. 打包：组件代码打包为 umd 格式，打包时配置 Webpack externals, 使打包产物不包含公共的依赖；见webpack.config.js

1. 上传：打包的组件 js 上传到 cdn；

1. 加载：在需要使用组件时，插入一个 script ，在这个 script 中将组件放在一个全局对象上；见load.js

1. 注册：在 script 插入完成后，从全局对象上获取组件，并进行注册；见load.js

#### 缺点

1. 组件的依赖共享，需要依赖提前先放到全局，html 模板需要较频繁改动；
1. 全局对象上要挂载的内容越来越多，影响加载性能，没有做到真正的按需加载；
1. 依赖版本难以管理。如 A 组件依赖了 loadsh 1.0， 而 B 组件依赖了 lodash 2.0，但是全局对象上的 lodash,同时挂载两个版本就必然会有冲突，因此版本必须一致；且后续如果某个组件要升级某个依赖的版本，也势必会影响所以其他组件。